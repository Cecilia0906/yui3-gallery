<!DOCTYPE html>
<html>
<head>
	<title>Y.Node.Deferred plugin test</title>
	<style>
		#test {
			width: 150px;
			height: 150px;
			background: #999;
			position: absolute;
			top: 30px;
			left: 30px;
			font-size: 40px;
		}
	</style>
</head>
<body>
	<div id="test"></div>
	<script src="http://yui.yahooapis.com/combo?3.3.0/build/yui/yui.js&3.3.0/build/loader/loader.js"></script>
	<script>
		YUI({
			filter: 'raw',
			modules: {
				'gallery-deferred': {
//					fullpath: 'http://github.com/juandopazo/yui3-gallery-dev/raw/master/src/gallery-deferred/build_tmp/gallery-deferred.js'
					fullpath: 'http://localhost/yui3-gallery-dev/src/gallery-deferred/build_tmp/gallery-deferred.js',
					requires: ['array-extras']
				}
			}
		}).use('node', 'node-load', 'transition', 'plugin', 'gallery-deferred', function (Y) {
			
			var node = Y.one('#test').plug(Y.Node.Deferred);
			
			var deferredAction = node.deferred.transition({ left: '300px' })
									.transition({ top: '300px' })
									.load('node-deferred-content.html')
									.transition({ width: '420px', height: '420px', top: '30px' });
			
			Y.when(Y.io.defer('io-deferred.html'), deferredAction).then(Y.io.defer('node-deferred.html')).end(function (a, b) {
				console.log(a[1], b[1]);
			});

		});
	</script>
</body>
</html>