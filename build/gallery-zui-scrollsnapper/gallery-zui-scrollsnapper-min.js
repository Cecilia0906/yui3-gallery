YUI.add("gallery-zui-scrollsnapper",function(b){var a=function(){a.superclass.constructor.apply(this,arguments);};a.NAME="pluginScrollSnapper";a.NS="pages";a.ATTRS={selector:{value:null},index:{value:0,lazyAdd:false,setter:function(f){var e=this.get("total"),d=this.get("index"),c=Math.max(Math.floor(f),0);if(e&&(c>=e)){c=e-1;}if(this._pages){this.scrollTo(c,(d==c)?-1:0);}return c;}},total:{value:0}};b.namespace("zui").ScrollSnapper=b.extend(a,b.Plugin.Base,{initializer:function(){this._host=this.get("host").setAttrs({});this._vertical=this._host._scrollsVertical;this._snapAttr=this._vertical?"offsetTop":"offsetLeft";this._snapRange=this._vertical?"offsetHeight":"offsetWidth";this._snapSource=this._vertical?"scrollY":"scrollX";this.afterHostMethod("_uiDimensionsChange",this._updatePages);this.afterHostEvent("render",this._updatePages);this.afterHostEvent("scrollEnd",this._scrollEnded);this._updatePages();},_updatePages:function(){var c=this._host.get("contentBox"),d=this.get("selector");this._pages=d?c.all(d):c.get("children");this.set("total",this._pages.size());},_scrollEnded:function(c){if(this._host._flicking){this._snapping=false;return;}if(!this._snapping){this.snapTo(this.snapIndex());}else{this._snapping=false;}},snapTo:function(c){this.set("index",c);},scrollTo:function(e,h,i){var c=Math.max(Math.floor(e),0),d=Math.max(h,0),g=this._pages.item(c),f=g?g.get(this._snapAttr):0;if(d>0){this._snapping=true;}if(this._vertical){this._host.scrollTo(0,f,d,i);}else{this._host.scrollTo(f,0,d,i);}},next:function(){var c=this.get("index");if(c<this.get("total")-1){this.set("index",c+1);}},prev:function(){var c=this.get("index");if(c>0){this.set("index",c-1);}},snapIndex:function(){var d=this._snapAttr,g=this._snapRange,i=this._host.get(this._snapSource),f,h,c=this._pages,e=c.size();for(f=0;f<e;f++){h=c.item(f);if(i<h.get(d)+h.get(g)/2){return f;}}return null;}});},"gallery-2012.08.22-20-00",{requires:["scrollview-base","plugin"],skinnable:false});